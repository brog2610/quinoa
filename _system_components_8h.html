<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Quinoa: /home/travis/build/jbakosi/quinoa/src/Control/SystemComponents.h File Reference</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">Quinoa
   
   </div>
   <div id="projectbrief">Adaptive computational fluid dynamics</div>
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Documents</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('_system_components_8h.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#namespaces">Namespaces</a>  </div>
  <div class="headertitle">
<div class="title">/home/travis/build/jbakosi/quinoa/src/Control/SystemComponents.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Operations on numbers of scalar components of systems of equations.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;boost/mpl/for_each.hpp&gt;</code><br/>
<code>#include &lt;boost/mpl/remove.hpp&gt;</code><br/>
<code>#include &lt;boost/mpl/at.hpp&gt;</code><br/>
<code>#include &quot;<a class="el" href="_make__list_8h_source.html">Make_list.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="_tagged_tuple_8h_source.html">TaggedTuple.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="_stat_ctr_8h_source.html">StatCtr.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="_keywords_8h_source.html">Keywords.h</a>&quot;</code><br/>
</div>
<p><a href="_system_components_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtk_1_1ctr_1_1ncomponents.html">tk::ctr::ncomponents&lt; Tags &gt;</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structtk_1_1ctr_1_1ncomponents_1_1zero.html">tk::ctr::ncomponents&lt; Tags &gt;::zero</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structtk_1_1ctr_1_1ncomponents_1_1addncomp.html">tk::ctr::ncomponents&lt; Tags &gt;::addncomp</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structtk_1_1ctr_1_1ncomponents_1_1addncomp4tag.html">tk::ctr::ncomponents&lt; Tags &gt;::addncomp4tag&lt; tag &gt;</a></td></tr>
<tr><td colspan="2"><h2><a name="namespaces"></a>
Namespaces</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">namespace &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacetk.html">tk</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight"><p>Toolkit declarations and definitions for general purpose utilities. </p>
<br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">namespace &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacetk_1_1ctr.html">tk::ctr</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight"><p>Toolkit control, general purpose user input to internal data transfer. </p>
<br/></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>Operations on numbers of scalar components of systems of equations. </p>
<dl class="author"><dt><b>Author:</b></dt><dd>J. Bakosi </dd></dl>
<dl class="date"><dt><b>Date:</b></dt><dd>Mon 01 Jun 2015 02:52:20 PM MDT </dd></dl>
<dl class="copyright"><dt><b>Copyright:</b></dt><dd>2012-2015, Jozsef Bakosi.</dd></dl>
<p>Operations on numbers of scalar components of systems of equations, e.g. multiple equation sets of a physical model or a set of equations of different kinds.</p>
<p>_Problem:_ We are given a type that is a <a class="el" href="structtk_1_1tuple_1_1tagged__tuple.html">tk::tuple::tagged_tuple</a> that contains an arbitrary number of std::vectors of integers. The number of vectors are fixed at compile-time (accessed via tags) but their (differing) length is only known at run-time (after parsing user input). What we need are functions that operate on this data structure and return, e.g., the total number of components in the whole system or the offset in the whole data structure for a given tag. The functions should thus be able to operate on a list of types, i.e., a double for loop over all tags and associated vectors - one at compile-time and the other one at run-time.</p>
<p>_Example:_ An example is to define storage for systems of stochastic differential equations as in walker::ctr::ncomps. In [walker](walker.html) various types of stochastic differential equations are implemented and numerically integrated in time in order to compute and learn about their statistical behavior. Since different types of systems can be parameterized differently, there can be several systems of the same type (the number is user-defined so only known at run-time). For example, it is possible to numerically integrate two systems of Dirichlet equations, see <a class="el" href="_dirichlet_8h.html" title="Dirichlet SDE.">DiffEq/Dirichlet.h</a>, one with 4, the other one with 5 scalar variables, parameterized differently, and estimate their arbitrary coupled statistics and joint PDFs. This requires that each type of system has a vector of integers storing the number of scalar variables.</p>
<p>_Solution:_ Looping through elements of a tuple is done via [Boost] (<a href="http://www.boost.org">http://www.boost.org</a>)'s [MetaProgramming Library (MPL)] (<a href="http://www.boost.org/doc/libs/release/libs/mpl">http://www.boost.org/doc/libs/release/libs/mpl</a>)'s [for_each] (<a href="http://www.boost.org/doc/libs/release/libs/mpl/doc/refmanual/for-each.html">http://www.boost.org/doc/libs/release/libs/mpl/doc/refmanual/for-each.html</a>). Such operations on types happen at compile-time, i.e., the code runs inside the compiler and only its result gets compiled into code to be run at run-time. Advantages are abstraction and generic code that is independent of the size and order of the tags in the tuple (and the associated vectors). Though it is not of primary concern for this data structure, this solution also generates efficient code, since part of the algorithm (for computing the offset, the total number of components, etc.) runs inside the compiler. All of this is kept generic, so it does not need to be changed when a new pair of tag and system of equations are added to the underlying tuple. Thus, _the main advantage is that changing the order of the vectors in the tuple or adding new ones at arbitrary locations will not require change to client-code._</p>
<p>_An alternative approach:_ Of course this could have been simply done with a purely run-time vector of vector of integers. However, that would not have allowed a tag-based access to the different systems of equations. (Sure, one can define an enum for equation indexing, but that just adds code to what is already need to be changed if a change happens to the underlying data structure.) As a consequence, a component in a vector of vector would have had to be accessed as something like, ncomps[2][3], which is more error-prone to read than ncomps&lt; tag::dirichlet &gt;( 3 ). Furthermore, that design would have resulted in double-loops at run-time, instead of letting the compiler loop over the types at compile-time and do the run-time loops only for what is only known at run-time. Additionally, and most importantly, _any time a new system is introduced (or the order is changed), all client-code would have to be changed._</p>
<p>For example client-code, see <a class="el" href="classwalker_1_1_dirichlet.html#ad5fe97422126de0afbd69f569d2215e0" title="Constructor.">walker::Dirichlet::Dirichlet()</a> in <a class="el" href="_dirichlet_8h.html" title="Dirichlet SDE.">DiffEq/Dirichlet.h</a>, or <a class="el" href="classwalker_1_1_integrator.html#a1955750882f6650bd78819b8d7b9794b">walker::Integrator::Integrator</a> in <a class="el" href="_integrator_8h.html" title="Integrator advances differential equations.">Walker/Integrator.h</a>. </p>

<p>Definition in file <a class="el" href="_system_components_8h_source.html">SystemComponents.h</a>.</p>
</div></div><!-- contents -->
</div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="_system_components_8h.html">SystemComponents.h</a>      </li>

    <li class="footer">Generated on Tue Jul 7 2015 00:09:44 for Quinoa by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.6.1 </li>
   </ul>
 </div>


</body>
</html>
