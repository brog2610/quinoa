<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.9.1"/>
<title>Quinoa: tk::zoltan Namespace Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/SVG"],
});
</script><script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="quinoa.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Quinoa
   </div>
   <div id="projectbrief">Adaptive computational fluid dynamics</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.9.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Documents</span></a></li>
      <li class="current"><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="namespaces.html"><span>Namespace&#160;List</span></a></li>
      <li><a href="namespacemembers.html"><span>Namespace&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('namespacetk_1_1zoltan.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">tk::zoltan Namespace Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Interoperation with the Zoltan library, used for static mesh partitioning.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structtk_1_1zoltan_1_1_h_g_r_a_p_h___d_a_t_a.html">HGRAPH_DATA</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a42758b1f8fa18345ca7713dd10a25a55"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacetk_1_1zoltan.html#a42758b1f8fa18345ca7713dd10a25a55">get_number_of_vertices</a> (void *data, int *ierr)</td></tr>
<tr class="memdesc:a42758b1f8fa18345ca7713dd10a25a55"><td class="mdescLeft">&#160;</td><td class="mdescRight">Zoltan query function returning the number of objects assigned to an MPI rank.  <a href="#a42758b1f8fa18345ca7713dd10a25a55">More...</a><br /></td></tr>
<tr class="separator:a42758b1f8fa18345ca7713dd10a25a55"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac644154a08e30f49ad24f7aa7cf42084"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacetk_1_1zoltan.html#ac644154a08e30f49ad24f7aa7cf42084">get_vertex_list</a> (void *data, int sizeGID, int sizeLID, ZOLTAN_ID_PTR globalID, ZOLTAN_ID_PTR localID, int wgt_dim, float *obj_wgts, int *ierr)</td></tr>
<tr class="memdesc:ac644154a08e30f49ad24f7aa7cf42084"><td class="mdescLeft">&#160;</td><td class="mdescRight">Zoltan query function query function to fill two (three if weights are used) arrays with information about the objects assigned to an MPI rank.  <a href="#ac644154a08e30f49ad24f7aa7cf42084">More...</a><br /></td></tr>
<tr class="separator:ac644154a08e30f49ad24f7aa7cf42084"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3ff02ce57d2e9652de6133d73841bda4"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacetk_1_1zoltan.html#a3ff02ce57d2e9652de6133d73841bda4">get_hypergraph_size</a> (void *data, int *num_lists, int *num_nonzeros, int *format, int *ierr)</td></tr>
<tr class="memdesc:a3ff02ce57d2e9652de6133d73841bda4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Zoltan query function query function which format we will supply the hypergraph.  <a href="#a3ff02ce57d2e9652de6133d73841bda4">More...</a><br /></td></tr>
<tr class="separator:a3ff02ce57d2e9652de6133d73841bda4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a893ff0b3ba9b6ca7e258c270f16a7df3"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacetk_1_1zoltan.html#a893ff0b3ba9b6ca7e258c270f16a7df3">get_hypergraph</a> (void *data, int sizeGID, int num_edges, int num_nonzeros, int format, ZOLTAN_ID_PTR edgeGID, int *vtxPtr, ZOLTAN_ID_PTR vtxGID, int *ierr)</td></tr>
<tr class="memdesc:a893ff0b3ba9b6ca7e258c270f16a7df3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Zoltan query function that returns a hypergraph in a compressed storage (CS) format.  <a href="#a893ff0b3ba9b6ca7e258c270f16a7df3">More...</a><br /></td></tr>
<tr class="separator:a893ff0b3ba9b6ca7e258c270f16a7df3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a294b6e52c7c2630206edf02786baa63f"><td class="memItemLeft" align="right" valign="top">static std::pair&lt; std::size_t, std::vector&lt; std::size_t &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacetk_1_1zoltan.html#a294b6e52c7c2630206edf02786baa63f">createHyperGraph</a> (<a class="el" href="classtk_1_1_uns_mesh.html">tk::UnsMesh</a> &amp;graph, <a class="el" href="structtk_1_1zoltan_1_1_h_g_r_a_p_h___d_a_t_a.html">HGRAPH_DATA</a> &amp;hg)</td></tr>
<tr class="separator:a294b6e52c7c2630206edf02786baa63f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a62249062ce66c0a53ecb146cac6779d7"><td class="memItemLeft" align="right" valign="top">static std::size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacetk_1_1zoltan.html#a62249062ce66c0a53ecb146cac6779d7">emptyHyperGraph</a> (<a class="el" href="structtk_1_1zoltan_1_1_h_g_r_a_p_h___d_a_t_a.html">HGRAPH_DATA</a> &amp;hg)</td></tr>
<tr class="separator:a62249062ce66c0a53ecb146cac6779d7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acebe5c87ef3485f63cec1eea7b5f3c57"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacetk_1_1zoltan.html#acebe5c87ef3485f63cec1eea7b5f3c57">destroyHyperGraph</a> (<a class="el" href="structtk_1_1zoltan_1_1_h_g_r_a_p_h___d_a_t_a.html">HGRAPH_DATA</a> &amp;hg, std::size_t nhedge)</td></tr>
<tr class="separator:acebe5c87ef3485f63cec1eea7b5f3c57"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8612e56aedd6fbaf760c5c0a756306ab"><td class="memItemLeft" align="right" valign="top">std::pair&lt; std::vector&lt; std::size_t &gt;, std::vector&lt; std::size_t &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacetk_1_1zoltan.html#a8612e56aedd6fbaf760c5c0a756306ab">partitionMesh</a> (<a class="el" href="classtk_1_1_uns_mesh.html">tk::UnsMesh</a> &amp;graph, uint64_t npart, const <a class="el" href="classtk_1_1_print.html">tk::Print</a> &amp;print)</td></tr>
<tr class="memdesc:a8612e56aedd6fbaf760c5c0a756306ab"><td class="mdescLeft">&#160;</td><td class="mdescRight">Partition mesh using Zoltan's hypergraph algorithm in serial.  <a href="#a8612e56aedd6fbaf760c5c0a756306ab">More...</a><br /></td></tr>
<tr class="separator:a8612e56aedd6fbaf760c5c0a756306ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Interoperation with the Zoltan library, used for static mesh partitioning. </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a294b6e52c7c2630206edf02786baa63f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static std::pair&lt; std::size_t, std::vector&lt; std::size_t &gt; &gt; tk::zoltan::createHyperGraph </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classtk_1_1_uns_mesh.html">tk::UnsMesh</a> &amp;&#160;</td>
          <td class="paramname"><em>graph</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structtk_1_1zoltan_1_1_h_g_r_a_p_h___d_a_t_a.html">HGRAPH_DATA</a> &amp;&#160;</td>
          <td class="paramname"><em>hg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">graph</td><td>Unstructured mesh graph object reference </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">hg</td><td>Hypergraph data structure to fill </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The number of hyperedges in graph, the new-&gt;old mesh point map </dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>This function must not be called on MPI ranks other than zero. </dd></dl>
<dl class="section author"><dt>Author</dt><dd>J. Bakosi </dd></dl>

<p>Definition at line <a class="el" href="_zoltan_inter_op_8_c_source.html#l00262">262</a> of file <a class="el" href="_zoltan_inter_op_8_c_source.html">ZoltanInterOp.C</a>.</p>

<p>References <a class="el" href="_zoltan_inter_op_8_c_source.html#l00049">tk::zoltan::HGRAPH_DATA::edgeGID</a>, <a class="el" href="_derived_data_8_c_source.html#l00026">tk::genEsup()</a>, <a class="el" href="_derived_data_8_c_source.html#l00110">tk::genPsup()</a>, <a class="el" href="_zoltan_inter_op_8_c_source.html#l00051">tk::zoltan::HGRAPH_DATA::nborGID</a>, <a class="el" href="_zoltan_inter_op_8_c_source.html#l00050">tk::zoltan::HGRAPH_DATA::nborIndex</a>, <a class="el" href="_zoltan_inter_op_8_c_source.html#l00048">tk::zoltan::HGRAPH_DATA::numAllNbors</a>, <a class="el" href="_zoltan_inter_op_8_c_source.html#l00047">tk::zoltan::HGRAPH_DATA::numMyHEdges</a>, <a class="el" href="_zoltan_inter_op_8_c_source.html#l00045">tk::zoltan::HGRAPH_DATA::numMyVertices</a>, <a class="el" href="_reorder_8_c_source.html#l00044">tk::remap()</a>, <a class="el" href="_reorder_8_c_source.html#l00068">tk::renumber()</a>, <a class="el" href="_uns_mesh_8h_source.html#l00129">tk::UnsMesh::size()</a>, <a class="el" href="_uns_mesh_8h_source.html#l00173">tk::UnsMesh::tetinpoel()</a>, and <a class="el" href="_zoltan_inter_op_8_c_source.html#l00046">tk::zoltan::HGRAPH_DATA::vtxGID</a>.</p>

<p>Referenced by <a class="el" href="_zoltan_inter_op_8_c_source.html#l00366">partitionMesh()</a>.</p>
<div class="fragment"><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;{</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;  <span class="comment">// Get number of points from graph.</span></div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;  <span class="keyword">const</span> <span class="keyword">auto</span> npoin = graph.<a class="code" href="classtk_1_1_uns_mesh.html#aa271a359fbefbf064b0df8fdfed43f6e">size</a>();</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;  <span class="comment">// Create hypergraph data structure based on mesh graph</span></div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;  hg.numMyVertices = <span class="keyword">static_cast&lt;</span> <span class="keywordtype">int</span> <span class="keyword">&gt;</span>( npoin );</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;  hg.numMyHEdges = hg.numMyVertices;</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;  hg.vtxGID = (ZOLTAN_ID_PTR)</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;    malloc(<span class="keyword">sizeof</span>(ZOLTAN_ID_TYPE) * <span class="keyword">static_cast&lt;</span>std::size_t<span class="keyword">&gt;</span>(hg.numMyVertices));</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;  hg.edgeGID = (ZOLTAN_ID_PTR)</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;    malloc(<span class="keyword">sizeof</span>(ZOLTAN_ID_TYPE) * <span class="keyword">static_cast&lt;</span>std::size_t<span class="keyword">&gt;</span>(hg.numMyHEdges));</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;  hg.nborIndex = (<span class="keywordtype">int</span>*)</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;    malloc(<span class="keyword">sizeof</span>(<span class="keywordtype">int</span>) * <span class="keyword">static_cast&lt;</span>std::size_t<span class="keyword">&gt;</span>(hg.numMyHEdges + 1));</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;  <span class="comment">// Assign global point ids</span></div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;  <span class="keywordflow">for</span> (std::size_t i=0; i&lt;static_cast&lt;std::size_t&gt;(hg.numMyVertices); ++i)</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;    hg.vtxGID[i] = static_cast&lt; ZOLTAN_ID_TYPE &gt;( i );</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;  <span class="comment">// Get tetrahedron mesh graph connectivity</span></div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;  <span class="keyword">auto</span>&amp; inpoel = graph.<a class="code" href="classtk_1_1_uns_mesh.html#add64317e28f878c1c7c7ac18aebf1d20">tetinpoel</a>();</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;  <span class="comment">// Generate (connectivity graph) points surrounding points of graph</span></div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;  <span class="keyword">auto</span> psup = <a class="code" href="namespacetk.html#ad2a88a65102c17149b44660db15d445b">tk::genPsup</a>( inpoel, 4, <a class="code" href="namespacetk.html#a66a2889d5d8aeb4a836842c6a1010463">tk::genEsup</a>( inpoel, 4 ) );</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;  <span class="comment">// Renumber mesh points for better data locality</span></div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;  std::vector&lt; std::size_t &gt; map, invmap;</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;  std::tie( map, invmap ) = <a class="code" href="namespacetk.html#a1d0312d71017d8ffd9f11811a46e5a16">tk::renumber</a>( psup );</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;  <span class="comment">// Remap element connectivity</span></div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;  <a class="code" href="namespacetk.html#a5ac2475f6c08b5fcb81392b14aad73a4">tk::remap</a>( inpoel, map );</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;  <span class="comment">// Re-generate points surrounding points</span></div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;  psup = <a class="code" href="namespacetk.html#ad2a88a65102c17149b44660db15d445b">tk::genPsup</a>( inpoel, 4, <a class="code" href="namespacetk.html#a66a2889d5d8aeb4a836842c6a1010463">tk::genEsup</a>( inpoel, 4 ) );</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;  <span class="comment">// Allocate data to store the hypergraph ids. The total number of vertices or</span></div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;  <span class="comment">// neighbors in all the hyperedges of the hypergraph, nhedge = all points</span></div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;  <span class="comment">// surrounding points + number of points, since psup does not store the</span></div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;  <span class="comment">// connection to the own point, i.e., in matrix parlance, the main-diagonal.</span></div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;  <span class="comment">// In other words, here we need the number of edges in the graph, independent</span></div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;  <span class="comment">// of direction.</span></div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;  <span class="keyword">auto</span> nhedge = psup.first.size() - 1 + npoin;</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;  hg.numAllNbors = <span class="keyword">static_cast&lt;</span> <span class="keywordtype">int</span> <span class="keyword">&gt;</span>( nhedge );</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;  hg.nborGID = (ZOLTAN_ID_PTR)malloc(<span class="keyword">sizeof</span>(ZOLTAN_ID_TYPE) * nhedge);</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;  <span class="comment">// Fill up hypergraph edge ids and their indices</span></div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;  hg.nborIndex[0] = 0;</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;  <span class="keywordflow">for</span> (std::size_t p=0; p&lt;npoin; ++p) {</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;    hg.edgeGID[p] = <span class="keyword">static_cast&lt;</span> ZOLTAN_ID_TYPE <span class="keyword">&gt;</span>( p+1 );</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;    <span class="comment">// put in own point id, i.e., main diagonal</span></div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;    hg.nborGID[ hg.nborIndex[p] ] = <span class="keyword">static_cast&lt;</span> ZOLTAN_ID_TYPE <span class="keyword">&gt;</span>( p );</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;    <span class="keywordtype">int</span> j = 1;</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;    <span class="comment">// put in neighbor point ids, i.e., off-diagonals</span></div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> i=psup.second[p]+1; i&lt;=psup.second[p+1]; ++i, ++j) {</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;      hg.nborGID[ hg.nborIndex[p] + j ] =</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;        <span class="keyword">static_cast&lt;</span> ZOLTAN_ID_TYPE <span class="keyword">&gt;</span>( psup.first[i] );</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;    }</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;    hg.nborIndex[p+1] = hg.nborIndex[p] + j;</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;  }</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;  <span class="keywordflow">return</span> { nhedge, invmap };</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;}</div>
<div class="ttc" id="namespacetk_html_ad2a88a65102c17149b44660db15d445b"><div class="ttname"><a href="namespacetk.html#ad2a88a65102c17149b44660db15d445b">tk::genPsup</a></div><div class="ttdeci">std::pair&lt; std::vector&lt; std::size_t &gt;, std::vector&lt; std::size_t &gt; &gt; genPsup(const std::vector&lt; std::size_t &gt; &amp;inpoel, std::size_t nnpe, const std::pair&lt; std::vector&lt; std::size_t &gt;, std::vector&lt; std::size_t &gt; &gt; &amp;esup)</div><div class="ttdoc">Generate derived data structure, points surrounding points. </div><div class="ttdef"><b>Definition:</b> <a href="_derived_data_8_c_source.html#l00110">DerivedData.C:110</a></div></div>
<div class="ttc" id="namespacetk_html_a1d0312d71017d8ffd9f11811a46e5a16"><div class="ttname"><a href="namespacetk.html#a1d0312d71017d8ffd9f11811a46e5a16">tk::renumber</a></div><div class="ttdeci">std::pair&lt; std::vector&lt; std::size_t &gt;, std::vector&lt; std::size_t &gt; &gt; renumber(const std::pair&lt; std::vector&lt; std::size_t &gt;, std::vector&lt; std::size_t &gt; &gt; &amp;psup)</div><div class="ttdoc">Reorder mesh points with the advancing front technique. </div><div class="ttdef"><b>Definition:</b> <a href="_reorder_8_c_source.html#l00068">Reorder.C:68</a></div></div>
<div class="ttc" id="namespacetk_html_a5ac2475f6c08b5fcb81392b14aad73a4"><div class="ttname"><a href="namespacetk.html#a5ac2475f6c08b5fcb81392b14aad73a4">tk::remap</a></div><div class="ttdeci">void remap(std::vector&lt; std::size_t &gt; &amp;id, const std::vector&lt; std::size_t &gt; &amp;newid)</div><div class="ttdoc">Reorder mesh point ids in a vector given a new order, i.e., index map. </div><div class="ttdef"><b>Definition:</b> <a href="_reorder_8_c_source.html#l00044">Reorder.C:44</a></div></div>
<div class="ttc" id="classtk_1_1_uns_mesh_html_add64317e28f878c1c7c7ac18aebf1d20"><div class="ttname"><a href="classtk_1_1_uns_mesh.html#add64317e28f878c1c7c7ac18aebf1d20">tk::UnsMesh::tetinpoel</a></div><div class="ttdeci">const std::vector&lt; std::size_t &gt; &amp; tetinpoel() const noexcept</div><div class="ttdef"><b>Definition:</b> <a href="_uns_mesh_8h_source.html#l00173">UnsMesh.h:173</a></div></div>
<div class="ttc" id="classtk_1_1_uns_mesh_html_aa271a359fbefbf064b0df8fdfed43f6e"><div class="ttname"><a href="classtk_1_1_uns_mesh.html#aa271a359fbefbf064b0df8fdfed43f6e">tk::UnsMesh::size</a></div><div class="ttdeci">const std::size_t &amp; size() const noexcept</div><div class="ttdef"><b>Definition:</b> <a href="_uns_mesh_8h_source.html#l00129">UnsMesh.h:129</a></div></div>
<div class="ttc" id="namespacetk_html_a66a2889d5d8aeb4a836842c6a1010463"><div class="ttname"><a href="namespacetk.html#a66a2889d5d8aeb4a836842c6a1010463">tk::genEsup</a></div><div class="ttdeci">std::pair&lt; std::vector&lt; std::size_t &gt;, std::vector&lt; std::size_t &gt; &gt; genEsup(const std::vector&lt; std::size_t &gt; &amp;inpoel, std::size_t nnpe)</div><div class="ttdoc">Generate derived data structure, elements surrounding points. </div><div class="ttdef"><b>Definition:</b> <a href="_derived_data_8_c_source.html#l00026">DerivedData.C:26</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="namespacetk_1_1zoltan_a294b6e52c7c2630206edf02786baa63f_cgraph.svg" width="424" height="283"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
</p>

</div>
</div>
<a class="anchor" id="acebe5c87ef3485f63cec1eea7b5f3c57"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void tk::zoltan::destroyHyperGraph </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtk_1_1zoltan_1_1_h_g_r_a_p_h___d_a_t_a.html">HGRAPH_DATA</a> &amp;&#160;</td>
          <td class="paramname"><em>hg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::size_t&#160;</td>
          <td class="paramname"><em>nhedge</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">hg</td><td>Hypergraph data structure to destroy </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">nhedge</td><td>Number of hyperedges in graph </td></tr>
  </table>
  </dd>
</dl>
<dl class="section author"><dt>Author</dt><dd>J. Bakosi </dd></dl>

<p>Definition at line <a class="el" href="_zoltan_inter_op_8_c_source.html#l00351">351</a> of file <a class="el" href="_zoltan_inter_op_8_c_source.html">ZoltanInterOp.C</a>.</p>

<p>References <a class="el" href="_zoltan_inter_op_8_c_source.html#l00049">tk::zoltan::HGRAPH_DATA::edgeGID</a>, <a class="el" href="_zoltan_inter_op_8_c_source.html#l00051">tk::zoltan::HGRAPH_DATA::nborGID</a>, <a class="el" href="_zoltan_inter_op_8_c_source.html#l00050">tk::zoltan::HGRAPH_DATA::nborIndex</a>, <a class="el" href="_zoltan_inter_op_8_c_source.html#l00047">tk::zoltan::HGRAPH_DATA::numMyHEdges</a>, <a class="el" href="_zoltan_inter_op_8_c_source.html#l00045">tk::zoltan::HGRAPH_DATA::numMyVertices</a>, and <a class="el" href="_zoltan_inter_op_8_c_source.html#l00046">tk::zoltan::HGRAPH_DATA::vtxGID</a>.</p>

<p>Referenced by <a class="el" href="_zoltan_inter_op_8_c_source.html#l00366">partitionMesh()</a>.</p>
<div class="fragment"><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;{</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;  <span class="keywordflow">if</span> (hg.numMyVertices &gt; 0) free( hg.vtxGID );</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;  <span class="keywordflow">if</span> (hg.numMyHEdges &gt; 0) free( hg.edgeGID );</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;  <span class="keywordflow">if</span> (hg.numMyHEdges &gt;= 0) free( hg.nborIndex );</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;  <span class="keywordflow">if</span> (nhedge &gt; 0) free( hg.nborGID );</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a62249062ce66c0a53ecb146cac6779d7"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static std::size_t tk::zoltan::emptyHyperGraph </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtk_1_1zoltan_1_1_h_g_r_a_p_h___d_a_t_a.html">HGRAPH_DATA</a> &amp;&#160;</td>
          <td class="paramname"><em>hg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">hg</td><td>Hypergraph data structure to fill </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Number of hyperedges in graph </dd></dl>
<dl class="section author"><dt>Author</dt><dd>J. Bakosi </dd></dl>

<p>Definition at line <a class="el" href="_zoltan_inter_op_8_c_source.html#l00332">332</a> of file <a class="el" href="_zoltan_inter_op_8_c_source.html">ZoltanInterOp.C</a>.</p>

<p>References <a class="el" href="_zoltan_inter_op_8_c_source.html#l00050">tk::zoltan::HGRAPH_DATA::nborIndex</a>, <a class="el" href="_zoltan_inter_op_8_c_source.html#l00048">tk::zoltan::HGRAPH_DATA::numAllNbors</a>, <a class="el" href="_zoltan_inter_op_8_c_source.html#l00047">tk::zoltan::HGRAPH_DATA::numMyHEdges</a>, and <a class="el" href="_zoltan_inter_op_8_c_source.html#l00045">tk::zoltan::HGRAPH_DATA::numMyVertices</a>.</p>

<p>Referenced by <a class="el" href="_zoltan_inter_op_8_c_source.html#l00366">partitionMesh()</a>.</p>
<div class="fragment"><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;{</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;  hg.numMyVertices = 0;</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;  hg.numMyHEdges = hg.numMyVertices;</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;  hg.numAllNbors = 0;</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;  hg.nborIndex = (<span class="keywordtype">int</span>*)</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;    malloc(<span class="keyword">sizeof</span>(<span class="keywordtype">int</span>) * <span class="keyword">static_cast&lt;</span>std::size_t<span class="keyword">&gt;</span>(hg.numMyHEdges + 1));</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;  hg.nborIndex[0] = 0;</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;  <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a893ff0b3ba9b6ca7e258c270f16a7df3"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void tk::zoltan::get_hypergraph </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>sizeGID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>num_edges</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>num_nonzeros</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>format</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ZOLTAN_ID_PTR&#160;</td>
          <td class="paramname"><em>edgeGID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>vtxPtr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ZOLTAN_ID_PTR&#160;</td>
          <td class="paramname"><em>vtxGID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>ierr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Zoltan query function that returns a hypergraph in a compressed storage (CS) format. </p>
<p>The size and format of the data to be returned must have been supplied to Zoltan using a ZOLTAN_HG_SIZE_CS_FN_TYPE function.</p>
<p>When a hypergraph is distributed across multiple MPI ranks, Zoltan expects that all ranks share a consistent global numbering scheme for hyperedges and vertices. Also, no two ranks should return the same pin (matrix non-zero) in this query function. (Pin ownership is unique.)</p>
<p>This query function is required by all applications using the hypergraph methods of Zoltan (unless they are using the graph-based functions with hypergraph code instead).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">data</td><td>Pointer to user-defined data </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">sizeGID</td><td>The number of array entries used to describe a single global ID. This value is the maximum value over all ranks of the parameter NUM_GID_ENTRIES. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">num_edges</td><td>The number of global IDs that is expected to appear on return in edgeGID. This may correspond to either vertices or (hyper-)edges. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">num_nonzeros</td><td>The number of pins that is expected to appear on return in vtxGID. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">format</td><td>If format is ZOLTAN_COMPRESSED_EDGE, Zoltan expects that hyperedge global IDs will be returned in edgeGID, and that vertex global IDs will be returned in vtxGID. If it is ZOLTAN_COMPRESSED_VERTEX, then vertex global IDs are expected to be returned in edgeGID and hyperedge global IDs are expected to be returned in vtxGID. </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">edgeGID</td><td>Upon return, a list of num_edges global IDs. </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">vtxPtr</td><td>Upon return, this array contains num_edges integers such that the number of pins specified for hyperedge j (if format is ZOLTAN_COMPRESSED_EDGE) or vertex j (if format is ZOLTAN_COMPRESSED_VERTEX) is vtxPtr[j+1]-vtxPtr[j]. If the format is ZOLTAN_COMPRESSED_EDGE, vtxPtr[j]*sizeGID is the index into the array vtxGID where edge j's pins (vertices belonging to edge j) begin; if the format is ZOLTAN_COMPRESSED_VERTEX, vtxPtr[j]*sizeGID is the index into the array vtxGID where vertex j's pins (edges to which vertex j belongs) begin. Array indices begin at zero. </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">vtxGID</td><td>Upon return, a list of num_pins global IDs. This is the list of the pins contained in the hyperedges or vertices listed in vtxGID. </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">ierr</td><td>Error code </td></tr>
  </table>
  </dd>
</dl>
<dl class="section author"><dt>Author</dt><dd>J. Bakosi </dd></dl>

<p>Definition at line <a class="el" href="_zoltan_inter_op_8_c_source.html#l00188">188</a> of file <a class="el" href="_zoltan_inter_op_8_c_source.html">ZoltanInterOp.C</a>.</p>

<p>References <a class="el" href="_zoltan_inter_op_8_c_source.html#l00049">tk::zoltan::HGRAPH_DATA::edgeGID</a>, <a class="el" href="_zoltan_inter_op_8_c_source.html#l00051">tk::zoltan::HGRAPH_DATA::nborGID</a>, <a class="el" href="_zoltan_inter_op_8_c_source.html#l00050">tk::zoltan::HGRAPH_DATA::nborIndex</a>, <a class="el" href="_zoltan_inter_op_8_c_source.html#l00048">tk::zoltan::HGRAPH_DATA::numAllNbors</a>, and <a class="el" href="_zoltan_inter_op_8_c_source.html#l00047">tk::zoltan::HGRAPH_DATA::numMyHEdges</a>.</p>

<p>Referenced by <a class="el" href="_zoltan_inter_op_8_c_source.html#l00366">partitionMesh()</a>.</p>
<div class="fragment"><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;{</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;  HGRAPH_DATA *hg = (HGRAPH_DATA *)data;</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;  *ierr = ZOLTAN_OK;</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;  <span class="keywordflow">if</span> ( (num_edges != hg-&gt;numMyHEdges) ||</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;       (num_nonzeros != hg-&gt;numAllNbors) ||</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;       (format != ZOLTAN_COMPRESSED_EDGE) )</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;  {</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    *ierr = ZOLTAN_FATAL;</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;  }</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;num_edges; ++i) {</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;    edgeGID[i] = hg-&gt;edgeGID[i];</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;    vtxPtr[i] = hg-&gt;nborIndex[i];</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;  }</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;num_nonzeros; ++i) vtxGID[i] = hg-&gt;nborGID[i];</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a3ff02ce57d2e9652de6133d73841bda4"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void tk::zoltan::get_hypergraph_size </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>num_lists</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>num_nonzeros</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>format</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>ierr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Zoltan query function query function which format we will supply the hypergraph. </p>
<p>A hypergraph can be supplied to the Zoltan library in one of two compressed storage formats. Although hypergraphs are often used to represent the structure of sparse matrices, the Zoltan/PHG terminology is purely in terms of vertices and hyperedges (not rows or columns). The two compressed formats are analogous to CRS and CCS for matrices.</p>
<p>In compressed hyperedge format (ZOLTAN_COMPRESSED_EDGE) a list of global hyperedge IDs is provided. Then a single list of the hypergraph pins, is provided. A pin is the connection between a vertex and a hyperedge (corresponds to a nonzero in a sparse matrix). Pins do not have separate IDs but are rather identified by the global ID of the vertex containing the pin, and implicitly also by the hyperedge ID.</p>
<p>The other format is compressed vertex (ZOLTAN_COMPRESSED_VERTEX). In this format a list of vertex global IDs is provided. Then a list of pins ordered by vertex and then by hyperedge is provided. The pin ID in this case is the global ID of the hyperedge in which the pin appears. In both formats, an array must be provided pointing to the start in the list of pins where each hyperedge or vertex begins.</p>
<p>The purpose of this query function is to tell Zoltan in which format we will supply the hypergraph, how many vertices and hyperedges there will be, and how many pins. The actual hypergraph is supplied with a query function of the type ZOLTAN_HG_CS_FN_TYPE.</p>
<p>This query function is required by all applications using the hypergraph methods of Zoltan (unless they are using the graph-based functions with hypergraph code instead). </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">data</td><td>Pointer to user-defined data </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">num_lists</td><td>Upon return, the number of vertices (if using compressed vertex storage) or hyperedges (if using compressed hyperedge storage) that will be supplied to Zoltan by the MPI rank. </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">num_nonzeros</td><td>Upon return, the number of pins (connections between vertices and hyperedges) that will be supplied to Zoltan by the MPI rank. </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">format</td><td>Upon return, the format in which we will provide the hypergraph to Zoltan. The options are ZOLTAN_COMPRESSED_EDGE and ZOLTAN_COMPRESSED_VERTEX. </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">ierr</td><td>Error code </td></tr>
  </table>
  </dd>
</dl>
<dl class="section author"><dt>Author</dt><dd>J. Bakosi </dd></dl>

<p>Definition at line <a class="el" href="_zoltan_inter_op_8_c_source.html#l00126">126</a> of file <a class="el" href="_zoltan_inter_op_8_c_source.html">ZoltanInterOp.C</a>.</p>

<p>References <a class="el" href="_zoltan_inter_op_8_c_source.html#l00048">tk::zoltan::HGRAPH_DATA::numAllNbors</a>, and <a class="el" href="_zoltan_inter_op_8_c_source.html#l00047">tk::zoltan::HGRAPH_DATA::numMyHEdges</a>.</p>

<p>Referenced by <a class="el" href="_zoltan_inter_op_8_c_source.html#l00366">partitionMesh()</a>.</p>
<div class="fragment"><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;{</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;  HGRAPH_DATA *hg = (HGRAPH_DATA *)data;</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;  *ierr = ZOLTAN_OK;</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;  *num_lists = hg-&gt;numMyHEdges;</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;  *num_nonzeros = hg-&gt;numAllNbors;</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;  <span class="comment">// We will provide a compressed hyperedge (row) format. The alternative is</span></div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;  <span class="comment">// compressed vertex (column) format: ZOLTAN_COMPRESSED_VERTEX.</span></div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;  *format = ZOLTAN_COMPRESSED_EDGE;</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a42758b1f8fa18345ca7713dd10a25a55"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int tk::zoltan::get_number_of_vertices </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>ierr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Zoltan query function returning the number of objects assigned to an MPI rank. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">data</td><td>Pointer to user-defined data </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">ierr</td><td>Error code </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The number of objects that are assigned to the MPI rank </dd></dl>
<dl class="section author"><dt>Author</dt><dd>J. Bakosi </dd></dl>

<p>Definition at line <a class="el" href="_zoltan_inter_op_8_c_source.html#l00055">55</a> of file <a class="el" href="_zoltan_inter_op_8_c_source.html">ZoltanInterOp.C</a>.</p>

<p>References <a class="el" href="_zoltan_inter_op_8_c_source.html#l00045">tk::zoltan::HGRAPH_DATA::numMyVertices</a>.</p>

<p>Referenced by <a class="el" href="_zoltan_inter_op_8_c_source.html#l00366">partitionMesh()</a>.</p>
<div class="fragment"><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;{</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;  HGRAPH_DATA *hg = (HGRAPH_DATA*)data;</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;  *ierr = ZOLTAN_OK;</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;  <span class="keywordflow">return</span> hg-&gt;numMyVertices;</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ac644154a08e30f49ad24f7aa7cf42084"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void tk::zoltan::get_vertex_list </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>sizeGID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>sizeLID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ZOLTAN_ID_PTR&#160;</td>
          <td class="paramname"><em>globalID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ZOLTAN_ID_PTR&#160;</td>
          <td class="paramname"><em>localID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>wgt_dim</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float *&#160;</td>
          <td class="paramname"><em>obj_wgts</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>ierr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Zoltan query function query function to fill two (three if weights are used) arrays with information about the objects assigned to an MPI rank. </p>
<p>This Zoltan query function fills two (three if weights are used) arrays with information about the objects assigned to an MPI rank. Both arrays are allocated (and subsequently freed) by Zoltan; their size is determined by a call to a ZOLTAN_NUM_OBJ_FN query function (get_number_of_vertices) to get the array size. For many algorithms, either a ZOLTAN_OBJ_LIST_FN query function or a ZOLTAN_FIRST_OBJ_FN/ZOLTAN_NEXT_OBJ_FN query-function pair must be registered; however, both query options need not be provided. The ZOLTAN_OBJ_LIST_FN is preferred for efficiency. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">data</td><td>Pointer to user-defined data </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">sizeGID</td><td>The number of array entries used to describe a single global ID. This value is the maximum value over all MPI ranks of the parameter NUM_GID_ENTRIES. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">sizeLID</td><td>The number of array entries used to describe a single local ID. This value is the maximum value over all MPI ranks of the parameter NUM_LID_ENTRIES. (It should be zero if local ids are not used.) </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">globalID</td><td>Upon return, an array of unique global IDs for all objects assigned to the MPI rank. </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">localID</td><td>Upon return, an array of local IDs, the meaning of which can be determined by the application, for all objects assigned to the MPI rank (optional). </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">wgt_dim</td><td>The number of weights associated with an object (typically 1), or 0 if weights are not requested. This value is set through the parameter OBJ_WEIGHT_DIM. </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">obj_wgts</td><td>Upon return, an array of object weights. Weights for object i are stored in obj_wgts[(i-1)*wgt_dim:i*wgt_dim-1]. If wgt_dim=0, the return value of obj_wgts is undefined and may be NULL. </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">ierr</td><td>Error code </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The number of objects that are assigned to the MPI rank </dd></dl>
<dl class="section author"><dt>Author</dt><dd>J. Bakosi </dd></dl>

<p>Definition at line <a class="el" href="_zoltan_inter_op_8_c_source.html#l00070">70</a> of file <a class="el" href="_zoltan_inter_op_8_c_source.html">ZoltanInterOp.C</a>.</p>

<p>References <a class="el" href="_zoltan_inter_op_8_c_source.html#l00045">tk::zoltan::HGRAPH_DATA::numMyVertices</a>, and <a class="el" href="_zoltan_inter_op_8_c_source.html#l00046">tk::zoltan::HGRAPH_DATA::vtxGID</a>.</p>

<p>Referenced by <a class="el" href="_zoltan_inter_op_8_c_source.html#l00366">partitionMesh()</a>.</p>
<div class="fragment"><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;{</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;  HGRAPH_DATA *hg = (HGRAPH_DATA*)data;</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;  *ierr = ZOLTAN_OK;</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;  <span class="comment">// Return the IDs of our vertices, but no weights. Zoltan will assume equally</span></div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;  <span class="comment">// weighted vertices.</span></div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;hg-&gt;numMyVertices; ++i) {</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    globalID[i] = hg-&gt;vtxGID[i];</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    localID[i] = <span class="keyword">static_cast&lt;</span> ZOLTAN_ID_TYPE <span class="keyword">&gt;</span>( i );</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;  }</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a8612e56aedd6fbaf760c5c0a756306ab"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::pair&lt; std::vector&lt; std::size_t &gt;, std::vector&lt; std::size_t &gt; &gt; tk::zoltan::partitionMesh </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classtk_1_1_uns_mesh.html">tk::UnsMesh</a> &amp;&#160;</td>
          <td class="paramname"><em>graph</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>npart</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classtk_1_1_print.html">tk::Print</a> &amp;&#160;</td>
          <td class="paramname"><em>print</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Partition mesh using Zoltan's hypergraph algorithm in serial. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">graph</td><td>Unstructured mesh graph object reference </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">npart</td><td>Number of desired graph partitions </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">print</td><td>Pretty printer </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Array of chare ownership IDs mapping graph points to concurrent async chares, and new-&gt;old mesh point id map (new: renumbered, old: as in mesh file)</dd></dl>
<p>This function uses Zoltan to partition the mesh graph in serial. It assumes the mesh graph only exists on MPI rank 0. </p><dl class="section author"><dt>Author</dt><dd>J. Bakosi </dd></dl>

<p>Definition at line <a class="el" href="_zoltan_inter_op_8_c_source.html#l00366">366</a> of file <a class="el" href="_zoltan_inter_op_8_c_source.html">ZoltanInterOp.C</a>.</p>

<p>References <a class="el" href="_exception_m_p_i_8h_source.html#l00041">AssertMPI</a>, <a class="el" href="_zoltan_inter_op_8_c_source.html#l00262">createHyperGraph()</a>, <a class="el" href="_zoltan_inter_op_8_c_source.html#l00351">destroyHyperGraph()</a>, <a class="el" href="_zoltan_inter_op_8_c_source.html#l00332">emptyHyperGraph()</a>, <a class="el" href="_exception_8h_source.html#l00059">ErrChk</a>, <a class="el" href="_exception_m_p_i_8h_source.html#l00059">ErrChkMPI</a>, <a class="el" href="_zoltan_inter_op_8_c_source.html#l00188">get_hypergraph()</a>, <a class="el" href="_zoltan_inter_op_8_c_source.html#l00126">get_hypergraph_size()</a>, <a class="el" href="_zoltan_inter_op_8_c_source.html#l00055">get_number_of_vertices()</a>, <a class="el" href="_zoltan_inter_op_8_c_source.html#l00070">get_vertex_list()</a>, and <a class="el" href="_exception_8h_source.html#l00034">Throw</a>.</p>

<p>Referenced by <a class="el" href="_inciter_setup_8_c_source.html#l00455">inciter::prepareMesh()</a>.</p>
<div class="fragment"><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;{</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;  <span class="comment">// Initialize the Zoltan library</span></div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;  <span class="keywordtype">float</span> ver = 0.0;</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;  <a class="code" href="_exception_m_p_i_8h.html#a3afa50d45842d4814d89150d9518d9db">ErrChkMPI</a>( Zoltan_Initialize( 0, <span class="keyword">nullptr</span>, &amp;ver ) == ZOLTAN_OK,</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;             <span class="stringliteral">&quot;Zoltan could not be initialized&quot;</span> );</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;  <span class="comment">// Create Zoltan data structure</span></div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;  <span class="keyword">struct </span>Zoltan_Struct *zz;</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;  zz = Zoltan_Create( MPI_COMM_WORLD );</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;  <a class="code" href="_exception_m_p_i_8h.html#ad1c0e4f6ba0562153542fc4232518cfd">AssertMPI</a>( zz != <span class="keyword">nullptr</span>, <span class="stringliteral">&quot;Failed to create Zoltan data structure&quot;</span> );</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;  <span class="keywordtype">int</span> peid;</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;  MPI_Comm_rank( MPI_COMM_WORLD, &amp;peid );</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;  <span class="comment">// Set Zoltan parameters</span></div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;  Zoltan_Set_Param( zz, <span class="stringliteral">&quot;DEBUG_LEVEL&quot;</span>, <span class="stringliteral">&quot;0&quot;</span> );</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;  Zoltan_Set_Param( zz, <span class="stringliteral">&quot;LB_METHOD&quot;</span>, <span class="stringliteral">&quot;HYPERGRAPH&quot;</span> );</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;  Zoltan_Set_Param( zz, <span class="stringliteral">&quot;LB_APPROACH&quot;</span>, <span class="stringliteral">&quot;PARTITION&quot;</span> );</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;  Zoltan_Set_Param( zz, <span class="stringliteral">&quot;HYPERGRAPH_PACKAGE&quot;</span>, <span class="stringliteral">&quot;PHG&quot;</span> );</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;  Zoltan_Set_Param( zz, <span class="stringliteral">&quot;NUM_GID_ENTRIES&quot;</span>, <span class="stringliteral">&quot;1&quot;</span> );</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;  Zoltan_Set_Param( zz, <span class="stringliteral">&quot;NUM_LID_ENTRIES&quot;</span>, <span class="stringliteral">&quot;1&quot;</span> );</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;  Zoltan_Set_Param( zz, <span class="stringliteral">&quot;OBJ_WEIGHT_DIM&quot;</span>, <span class="stringliteral">&quot;0&quot;</span> );</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;  Zoltan_Set_Param( zz, <span class="stringliteral">&quot;EDGE_WEIGHT_DIM&quot;</span>, <span class="stringliteral">&quot;0&quot;</span> );</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;  Zoltan_Set_Param( zz, <span class="stringliteral">&quot;RETURN_LISTS&quot;</span>, <span class="stringliteral">&quot;PART&quot;</span> );</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;  <span class="comment">//Zoltan_Set_Param( zz, &quot;PHG_EDGE_SIZE_THRESHOLD&quot;, &quot;1.0&quot; );</span></div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;  <span class="comment">//Zoltan_Set_Param( zz, &quot;REMAP&quot;, &quot;0&quot; );</span></div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;  Zoltan_Set_Param( zz, <span class="stringliteral">&quot;NUM_GLOBAL_PARTS&quot;</span>, std::to_string(npart).c_str() );</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;  HGRAPH_DATA hg;</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;  std::size_t nhedge = 0;</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;  std::vector&lt; std::size_t &gt; invmap;</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;  <span class="keywordflow">if</span> (peid == 0)  </div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;    std::tie( nhedge, invmap ) = <a class="code" href="namespacetk_1_1zoltan.html#a294b6e52c7c2630206edf02786baa63f">createHyperGraph</a>( graph, hg );</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;    nhedge = <a class="code" href="namespacetk_1_1zoltan.html#a62249062ce66c0a53ecb146cac6779d7">emptyHyperGraph</a>( hg );</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;  <span class="comment">// Set Zoltan query functions</span></div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;  Zoltan_Set_Num_Obj_Fn( zz, <a class="code" href="namespacetk_1_1zoltan.html#a42758b1f8fa18345ca7713dd10a25a55">get_number_of_vertices</a>, &amp;hg );</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;  Zoltan_Set_Obj_List_Fn( zz, <a class="code" href="namespacetk_1_1zoltan.html#ac644154a08e30f49ad24f7aa7cf42084">get_vertex_list</a>, &amp;hg );</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;  Zoltan_Set_HG_Size_CS_Fn( zz, <a class="code" href="namespacetk_1_1zoltan.html#a3ff02ce57d2e9652de6133d73841bda4">get_hypergraph_size</a>, &amp;hg );</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;  Zoltan_Set_HG_CS_Fn( zz, <a class="code" href="namespacetk_1_1zoltan.html#a893ff0b3ba9b6ca7e258c270f16a7df3">get_hypergraph</a>, &amp;hg );</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;  <span class="comment">// Perform partitioning using Zoltan</span></div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;  <span class="keywordtype">int</span> changes, numGidEntries, numLidEntries, numImport, numExport;</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;  ZOLTAN_ID_PTR importGlobalGids, importLocalGids, exportGlobalGids,</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;                exportLocalGids;</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;  <span class="keywordtype">int</span> *importProcs, *importToPart, *exportProcs, *exportToPart;</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;  <span class="keywordtype">int</span> rc =</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;    Zoltan_LB_Partition(</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;      zz,                <span class="comment">// Input hypergraph data structure (remaining: output)</span></div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;      &amp;changes,          <span class="comment">// 1 if partitioning was changed, 0 otherwise</span></div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;      &amp;numGidEntries,    <span class="comment">// Number of integers used for a global ID</span></div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;      &amp;numLidEntries,    <span class="comment">// Number of integers used for a local ID</span></div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;      &amp;numImport,        <span class="comment">// Number of vertices to be sent to me</span></div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;      &amp;importGlobalGids, <span class="comment">// Global IDs of vertices to be sent to me</span></div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;      &amp;importLocalGids,  <span class="comment">// Local IDs of vertices to be sent to me</span></div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;      &amp;importProcs,      <span class="comment">// Process rank for source of each incoming vertex</span></div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;      &amp;importToPart,     <span class="comment">// New partition for each incoming vertex</span></div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;      &amp;numExport,        <span class="comment">// Number of vertices I must send to other processes</span></div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;      &amp;exportGlobalGids, <span class="comment">// Global IDs of the vertices I must send</span></div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;      &amp;exportLocalGids,  <span class="comment">// Local IDs of the vertices I must send</span></div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;      &amp;exportProcs,      <span class="comment">// Process to which I send each of the vertices</span></div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;      &amp;exportToPart );   <span class="comment">// Partition to which each vertex will belong</span></div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;  <span class="comment">// Destructor lambda</span></div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;  <span class="keyword">auto</span> destruct = [&amp;]() {</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;    <a class="code" href="namespacetk_1_1zoltan.html#acebe5c87ef3485f63cec1eea7b5f3c57">destroyHyperGraph</a>( hg, nhedge );    <span class="comment">// destroy hypergraph data structure</span></div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;    Zoltan_Destroy( &amp;zz );              <span class="comment">// destroy Zoltan data structure</span></div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;  };</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;  <span class="keywordflow">if</span> (rc != ZOLTAN_OK) {</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;    destruct();</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;    <a class="code" href="_exception_8h.html#a0412f798470c18f503a2c2f63c970ba8">Throw</a>( <span class="stringliteral">&quot;Zoltan_LB_Partition failed&quot;</span> );</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;  }</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;  <span class="comment">// Copy over array of chare IDs corresponding to the ownership of all points</span></div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;  <span class="comment">// in the mesh graph, i.e., the coloring or chare ids for all mesh nodes</span></div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;  std::vector&lt; std::size_t &gt; chare;</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> p=0; p&lt;numExport; ++p )</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;    chare.push_back( static_cast&lt; std::size_t &gt;( exportToPart[p] ) );</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;  std::size_t nchare = 1;</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;  <span class="keywordflow">if</span> (peid == 0) {</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;    <span class="comment">// Find out the number of partitions created by Zoltan</span></div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;    <span class="keyword">auto</span> minmax = std::minmax_element( begin(chare), <a class="code" href="namespacekw.html#a3d5542e9817eb16f871c22a15595e837">end</a>(chare) );</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;    nchare = *minmax.second - *minmax.first + 1; </div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;    <a class="code" href="_exception_8h.html#ac75cd6578896829d2bfbccf5de71de4f">ErrChk</a>( npart == nchare,</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;      <span class="stringliteral">&quot;The number of parts returned from the graph partitioner (&quot;</span> +</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;      std::to_string(nchare) + <span class="stringliteral">&quot;) does not equal the number of work units &quot;</span></div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;      <span class="stringliteral">&quot;computed (&quot;</span> + std::to_string(npart) + <span class="stringliteral">&quot;) based on the degree of &quot;</span></div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;      <span class="stringliteral">&quot;virtualization desired. This is an indication of a too large &quot;</span></div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;      <span class="stringliteral">&quot;overdecomposition. Solution 1: decrease the virtualization to a lower &quot;</span></div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;      <span class="stringliteral">&quot;value using the command-line arrgument &#39;-u&#39;. Solution 2: decrease the &quot;</span></div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;      <span class="stringliteral">&quot;number processing elements (PEs) using the charmrun command-line &quot;</span></div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;      <span class="stringliteral">&quot;argument &#39;+pN&#39; where N is the number of PEs, which implicitly increases &quot;</span></div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;      <span class="stringliteral">&quot;the size (and thus decreases the number) of work units.&quot;</span> );</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;  }</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;<span class="comment">//   if (peid == 0) {</span></div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;<span class="comment">//     std::cout &lt;&lt; &quot;\nchp: &quot;;</span></div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;<span class="comment">//     for (auto i : chare) std::cout &lt;&lt; i &lt;&lt; &quot; &quot;;</span></div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;<span class="comment">//     std::cout &lt;&lt; &#39;\n&#39;;</span></div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;<span class="comment">//   }</span></div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;  <span class="comment">// Free the arrays allocated by Zoltan_LB_Partition</span></div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;  Zoltan_LB_Free_Part( &amp;importGlobalGids, &amp;importLocalGids, &amp;importProcs,</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;                       &amp;importToPart );</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;  Zoltan_LB_Free_Part( &amp;exportGlobalGids, &amp;exportLocalGids, &amp;exportProcs,</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;                       &amp;exportToPart);</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;  <span class="comment">// Free hypergraph and Zoltan data structure</span></div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;  destruct();</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;  <span class="keywordflow">return</span> { chare, invmap };</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;}</div>
<div class="ttc" id="namespacetk_1_1zoltan_html_a42758b1f8fa18345ca7713dd10a25a55"><div class="ttname"><a href="namespacetk_1_1zoltan.html#a42758b1f8fa18345ca7713dd10a25a55">tk::zoltan::get_number_of_vertices</a></div><div class="ttdeci">static int get_number_of_vertices(void *data, int *ierr)</div><div class="ttdoc">Zoltan query function returning the number of objects assigned to an MPI rank. </div><div class="ttdef"><b>Definition:</b> <a href="_zoltan_inter_op_8_c_source.html#l00055">ZoltanInterOp.C:55</a></div></div>
<div class="ttc" id="namespacetk_1_1zoltan_html_acebe5c87ef3485f63cec1eea7b5f3c57"><div class="ttname"><a href="namespacetk_1_1zoltan.html#acebe5c87ef3485f63cec1eea7b5f3c57">tk::zoltan::destroyHyperGraph</a></div><div class="ttdeci">static void destroyHyperGraph(HGRAPH_DATA &amp;hg, std::size_t nhedge)</div><div class="ttdef"><b>Definition:</b> <a href="_zoltan_inter_op_8_c_source.html#l00351">ZoltanInterOp.C:351</a></div></div>
<div class="ttc" id="_exception_m_p_i_8h_html_ad1c0e4f6ba0562153542fc4232518cfd"><div class="ttname"><a href="_exception_m_p_i_8h.html#ad1c0e4f6ba0562153542fc4232518cfd">AssertMPI</a></div><div class="ttdeci">#define AssertMPI(expr,...)</div><div class="ttdoc">Assert macro that only throws an exception if expr fails. </div><div class="ttdef"><b>Definition:</b> <a href="_exception_m_p_i_8h_source.html#l00041">ExceptionMPI.h:41</a></div></div>
<div class="ttc" id="_exception_m_p_i_8h_html_a3afa50d45842d4814d89150d9518d9db"><div class="ttname"><a href="_exception_m_p_i_8h.html#a3afa50d45842d4814d89150d9518d9db">ErrChkMPI</a></div><div class="ttdeci">#define ErrChkMPI(expr,...)</div><div class="ttdoc">ErrChkMPI macro that only throws an exception if expr fails. </div><div class="ttdef"><b>Definition:</b> <a href="_exception_m_p_i_8h_source.html#l00059">ExceptionMPI.h:59</a></div></div>
<div class="ttc" id="_exception_8h_html_ac75cd6578896829d2bfbccf5de71de4f"><div class="ttname"><a href="_exception_8h.html#ac75cd6578896829d2bfbccf5de71de4f">ErrChk</a></div><div class="ttdeci">#define ErrChk(expr,...)</div><div class="ttdoc">ErrChk macro that only throws an exception if expr fails. </div><div class="ttdef"><b>Definition:</b> <a href="_exception_8h_source.html#l00059">Exception.h:59</a></div></div>
<div class="ttc" id="namespacetk_1_1zoltan_html_ac644154a08e30f49ad24f7aa7cf42084"><div class="ttname"><a href="namespacetk_1_1zoltan.html#ac644154a08e30f49ad24f7aa7cf42084">tk::zoltan::get_vertex_list</a></div><div class="ttdeci">static void get_vertex_list(void *data, int sizeGID, int sizeLID, ZOLTAN_ID_PTR globalID, ZOLTAN_ID_PTR localID, int wgt_dim, float *obj_wgts, int *ierr)</div><div class="ttdoc">Zoltan query function query function to fill two (three if weights are used) arrays with information ...</div><div class="ttdef"><b>Definition:</b> <a href="_zoltan_inter_op_8_c_source.html#l00070">ZoltanInterOp.C:70</a></div></div>
<div class="ttc" id="namespacekw_html_a3d5542e9817eb16f871c22a15595e837"><div class="ttname"><a href="namespacekw.html#a3d5542e9817eb16f871c22a15595e837">kw::end</a></div><div class="ttdeci">keyword&lt; end_info, e, n, d &gt; end</div><div class="ttdef"><b>Definition:</b> <a href="_keywords_8h_source.html#l00174">Keywords.h:174</a></div></div>
<div class="ttc" id="_exception_8h_html_a0412f798470c18f503a2c2f63c970ba8"><div class="ttname"><a href="_exception_8h.html#a0412f798470c18f503a2c2f63c970ba8">Throw</a></div><div class="ttdeci">#define Throw(...)</div><div class="ttdoc">Throw macro that always throws an exception. </div><div class="ttdef"><b>Definition:</b> <a href="_exception_8h_source.html#l00034">Exception.h:34</a></div></div>
<div class="ttc" id="namespacetk_1_1zoltan_html_a3ff02ce57d2e9652de6133d73841bda4"><div class="ttname"><a href="namespacetk_1_1zoltan.html#a3ff02ce57d2e9652de6133d73841bda4">tk::zoltan::get_hypergraph_size</a></div><div class="ttdeci">static void get_hypergraph_size(void *data, int *num_lists, int *num_nonzeros, int *format, int *ierr)</div><div class="ttdoc">Zoltan query function query function which format we will supply the hypergraph. </div><div class="ttdef"><b>Definition:</b> <a href="_zoltan_inter_op_8_c_source.html#l00126">ZoltanInterOp.C:126</a></div></div>
<div class="ttc" id="namespacetk_1_1zoltan_html_a294b6e52c7c2630206edf02786baa63f"><div class="ttname"><a href="namespacetk_1_1zoltan.html#a294b6e52c7c2630206edf02786baa63f">tk::zoltan::createHyperGraph</a></div><div class="ttdeci">static std::pair&lt; std::size_t, std::vector&lt; std::size_t &gt; &gt; createHyperGraph(tk::UnsMesh &amp;graph, HGRAPH_DATA &amp;hg)</div><div class="ttdef"><b>Definition:</b> <a href="_zoltan_inter_op_8_c_source.html#l00262">ZoltanInterOp.C:262</a></div></div>
<div class="ttc" id="namespacetk_1_1zoltan_html_a62249062ce66c0a53ecb146cac6779d7"><div class="ttname"><a href="namespacetk_1_1zoltan.html#a62249062ce66c0a53ecb146cac6779d7">tk::zoltan::emptyHyperGraph</a></div><div class="ttdeci">static std::size_t emptyHyperGraph(HGRAPH_DATA &amp;hg)</div><div class="ttdef"><b>Definition:</b> <a href="_zoltan_inter_op_8_c_source.html#l00332">ZoltanInterOp.C:332</a></div></div>
<div class="ttc" id="namespacetk_1_1zoltan_html_a893ff0b3ba9b6ca7e258c270f16a7df3"><div class="ttname"><a href="namespacetk_1_1zoltan.html#a893ff0b3ba9b6ca7e258c270f16a7df3">tk::zoltan::get_hypergraph</a></div><div class="ttdeci">static void get_hypergraph(void *data, int sizeGID, int num_edges, int num_nonzeros, int format, ZOLTAN_ID_PTR edgeGID, int *vtxPtr, ZOLTAN_ID_PTR vtxGID, int *ierr)</div><div class="ttdoc">Zoltan query function that returns a hypergraph in a compressed storage (CS) format. </div><div class="ttdef"><b>Definition:</b> <a href="_zoltan_inter_op_8_c_source.html#l00188">ZoltanInterOp.C:188</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="namespacetk_1_1zoltan_a8612e56aedd6fbaf760c5c0a756306ab_cgraph.svg" width="658" height="482"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacetk.html">tk</a></li><li class="navelem"><a class="el" href="namespacetk_1_1zoltan.html">zoltan</a></li>
    <li class="footer">Generated on Tue Jul 7 2015 06:44:21 for Quinoa by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.9.1 </li>
  </ul>
</div>
</body>
</html>
